(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{906:function(e,t,n){"use strict";n.r(t);var o=n(294),r=n(2),l=n(770),m=n(763),c=n(287),d=n(775),v=n(225),y=n(769),f=n(776),C=n(771),x=n(21),S=(n(65),n(23),n(171),n(39),{props:{value:{type:Boolean,default:!1}},data:function(){return{snackErrorForm:!1,itemsTypes:[{text:"COMISION",value:"COMISION"},{text:"PUBLI",value:"PUBLI"},{text:"SERVER",value:"SERVER"},{text:"REEMBOLSOS",value:"REEMBOLSOS"},{text:"PAGOS CHINO",value:"PAGOS_CHINO"},{text:"AT.CLIENTE",value:"AT_CLIENTE"},{text:"ABOGADA",value:"ABOGADA"},{text:"EXTRAS",value:"EXTRAS"}],payment:{type:"COMISION",amount:0,comments:null,status:"payed",store:null},storeList:{data:[]},rules:{required:[function(e){return!!e||"Este campo es requerido"}],number:function(e){return e.match(/^[0-9]*$/)||"Este campo solo acepta numeros"}}}},created:function(){this.payment.date=(new Date).toISOString().substr(0,10),this.getStores()},methods:{getStores:function(){var e=this;return Object(x.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("store/findAll",{company:e.$auth.user.company.id});case 2:e.storeList=t.sent,e.payment.store=null===(n=e.storeList.data[0])||void 0===n?void 0:n.id;case 4:case"end":return t.stop()}}),t)})))()},addPayment:function(){var e=this;if(!this.$refs.form.validate())return this.snackErrorForm=!0,void setTimeout((function(){e.snackErrorForm=!1}),3e3);this.$axios.post("/payments",{data:this.payment}).then((function(){e.payment={type:"COMISION",amount:0,date:(new Date).toISOString().substr(0,10),comments:null,status:"payed",store:e.payment.store},e.$emit("input",!1),e.$root.$emit("refresh")})),this.$emit("input",!1)}},computed:{}}),h=n(10),component=Object(h.a)(S,(function(){var e=this,t=e._self._c;return t(m.a,{attrs:{persistent:"",value:e.value,width:"700"}},[t("GeneralCardComponent",{attrs:{width:"100%"}},[t("GeneralCardTitleComponent",{staticClass:"primary white--text"},[e._v("\n      Nuevo movimiento\n      "),t(C.a),e._v(" "),t("generalCloseButtonComponent",{on:{input:function(t){return e.$emit("input",!1)}}})],1),e._v(" "),t(c.a),e._v(" "),t(r.c,[t(d.a,{ref:"form"},[t(y.a,[t(l.a,{staticClass:"col-12"},[t("FormsFieldsSelectComponent",{attrs:{label:"Tipo",rules:e.rules.required,items:e.itemsTypes},model:{value:e.payment.type,callback:function(t){e.$set(e.payment,"type",t)},expression:"payment.type"}})],1),e._v(" "),t(l.a,{staticClass:"col-12"},[t("formsFieldsSelectComponent",{attrs:{"item-text":"name","item-value":"id",items:e.storeList.data,type:"number",label:"Tienda"},model:{value:e.payment.store,callback:function(t){e.$set(e.payment,"store",t)},expression:"payment.store"}})],1),e._v(" "),t(l.a,{staticClass:"col-12"},[t("formsFieldsTextComponent",{attrs:{type:"date",label:"Fecha"},model:{value:e.payment.date,callback:function(t){e.$set(e.payment,"date",t)},expression:"payment.date"}})],1),e._v(" "),t(l.a,{staticClass:"col-12"},[t("FormsFieldsSelectComponent",{attrs:{label:"Estado",items:[{text:"Pagado",value:"payed"},{text:"Pendiente",value:"pending"}]},model:{value:e.payment.status,callback:function(t){e.$set(e.payment,"status",t)},expression:"payment.status"}})],1),e._v(" "),t(l.a,{staticClass:"col-md-12 col-12"},[t("formsFieldsTextComponent",{attrs:{"prepend-inner-icon":"mdi-currency-eur",type:"number",label:"Valor"},model:{value:e.payment.amount,callback:function(t){e.$set(e.payment,"amount",t)},expression:"payment.amount"}})],1),e._v(" "),t(l.a,{staticClass:"col-md-12"},[t("formsFieldsTextComponent",{attrs:{label:"Comentarios"},model:{value:e.payment.comments,callback:function(t){e.$set(e.payment,"comments",t)},expression:"payment.comments"}})],1)],1)],1)],1),e._v(" "),t(c.a),e._v(" "),t(r.a,[t(C.a),e._v(" "),t(o.a,{staticClass:"rounded-lg",attrs:{color:"secondary black--text rounded-lg font-weight-regular"},on:{click:function(t){return e.addPayment()}}},[e._v("\n        Agregar movimiento  "),t(v.a,[e._v("mdi-content-save")])],1)],1)],1),e._v(" "),t(f.a,{attrs:{color:"warning"},model:{value:e.snackErrorForm,callback:function(t){e.snackErrorForm=t},expression:"snackErrorForm"}},[e._v("\n    Hay campos requeridos incompletos\n  ")])],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{GeneralCardTitleComponent:n(83).default,FormsFieldsSelectComponent:n(91).default,GeneralCardComponent:n(51).default})}}]);